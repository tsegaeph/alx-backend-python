#!/bin/bash

echo "ğŸš€ Starting Blue-Green Deployment..."

echo "ğŸŸ¦ Deploying BLUE version..."
kubectl apply -f blue_deployment.yaml

echo "ğŸŸ© Deploying GREEN version..."
kubectl apply -f green_deployment.yaml

echo "ğŸ” Applying service..."
kubectl apply -f kubeservice.yaml

echo "ğŸ“¦ Current running pods:"
kubectl get pods -l app=messaging-app

echo "ğŸ§  Checking GREEN pod logs..."
GREEN_POD=$(kubectl get pods -l version=green -o jsonpath="{.items[0].metadata.name}")
kubectl logs $GREEN_POD

echo "âœ… Blue-Green deployment completed!"
